name: deployTslCert

trigger: none

pool:
  vmImage: ubuntu-latest
 
variables:
  - group: PipelineDeploymentVariables
  - name: filePath
    value: '$(System.DefaultWorkingDirectory)/pipelines/download-az-acme.ps1'

stages:
  - stage: certProcessing
    displayName: 'SSL Cert Processing'
    jobs:
      - job: getSetCert
        displayName: 'Get and set certificate'
        steps:
          - task: PowerShell@2
            displayName: 'Get az-acme CLI'
            inputs:
              targetType: filePath
              filePath: $(filePath)
              arguments: >
                - defaultWorkingDirectory $(System.DefaultWorkingDirectory)
